javascript:(function(){const apiLog=[];const originalFetch=window.fetch;const originalXHROpen=XMLHttpRequest.prototype.open;const originalXHRSend=XMLHttpRequest.prototype.send;function createPanel(){const panel=document.createElement('div');panel.id='api-capture-panel';panel.style='position:fixed;bottom:10px;right:-500px;width:480px;max-height:500px;overflow:auto;z-index:99999;background:#121212;color:#0f0;padding:10px;border:2px solid #0f0;font-family:monospace;font-size:13px;border-radius:8px;box-shadow:0 0 15px #0f0;transition:all 0.5s ease;';const header=document.createElement('div');header.style='font-weight:bold;margin-bottom:8px;display:flex;justify-content:space-between;align-items:center;text-shadow:0 0 5px #0f0;';header.innerHTML='<span>ðŸ“¡ <span style="color:#0f0;animation:glow 1s ease-in-out infinite alternate;">APIs CAPTURADAS</span> - <a href="https://github.com/JohnIohananDev" target="_blank" style="color:#0ff;text-decoration:none;cursor:pointer;font-weight:bold;">naughtyyjohn</a></span>';const hideBtn=document.createElement('button');hideBtn.textContent='[X]';hideBtn.style='cursor:pointer;background:#f00;color:#fff;border:none;padding:2px 6px;border-radius:4px;font-weight:bold;transition:all 0.3s;';hideBtn.onmouseover=()=>{hideBtn.style.transform='scale(1.1)';hideBtn.style.boxShadow='0 0 8px #f00';};hideBtn.onmouseout=()=>{hideBtn.style.transform='scale(1)';hideBtn.style.boxShadow='none';};hideBtn.onclick=()=>{panel.style.right='-500px';setTimeout(()=>{panel.style.display='none';},500);};const downloadBtn=document.createElement('button');downloadBtn.textContent='[â¬‡ JSON]';downloadBtn.style='cursor:pointer;background:#0f0;color:#000;border:none;padding:2px 6px;border-radius:4px;font-weight:bold;margin-left:5px;transition:all 0.3s;';downloadBtn.onmouseover=()=>{downloadBtn.style.transform='scale(1.1)';downloadBtn.style.boxShadow='0 0 8px #0f0';};downloadBtn.onmouseout=()=>{downloadBtn.style.transform='scale(1)';downloadBtn.style.boxShadow='none';};downloadBtn.onclick=()=>{const exportData={author:"John @naughtyyjohn",capturedAt:new Date().toISOString(),logs:apiLog};const blob=new Blob([JSON.stringify(exportData,null,2)],{type:'application/json'});const url=URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download='api-captures.json';a.click();downloadBtn.textContent='[âœ“ COPIADO]';setTimeout(()=>{downloadBtn.textContent='[â¬‡ JSON]';},2000);};header.appendChild(downloadBtn);header.appendChild(hideBtn);panel.appendChild(header);const style=document.createElement('style');style.textContent='@keyframes glow{from{text-shadow:0 0 5px #0f0,0 0 10px #0f0;}to{text-shadow:0 0 10px #0f0,0 0 20px #0f0,0 0 30px #0f0;}}@keyframes pulse{0%{border-color:#0f0;}50%{border-color:#0ff;}100%{border-color:#0f0;}}';panel.appendChild(style);document.body.appendChild(panel);setTimeout(()=>{panel.style.right='10px';},100);return panel;}const panel=createPanel();function createToggleSection(title,content){const container=document.createElement('div');container.style='margin:6px 0;border:1px solid #0f0;border-radius:5px;animation:pulse 2s infinite;';const summary=document.createElement('summary');summary.textContent=title;summary.style='cursor:pointer;padding:3px 8px;background:#0a0;color:#fff;font-weight:bold;user-select:none;border-radius:5px 5px 0 0;transition:all 0.3s;';summary.onmouseover=()=>{summary.style.background='#0f0';summary.style.color='#000';};summary.onmouseout=()=>{summary.style.background='#0a0';summary.style.color='#fff';};const pre=document.createElement('pre');pre.style='margin:0;padding:5px 8px;max-height:150px;overflow:auto;background:#222;border-top:none;white-space:pre-wrap;word-break:break-word;font-size:12px;';pre.textContent=content||'Nenhum';const details=document.createElement('details');details.appendChild(summary);details.appendChild(pre);container.appendChild(details);return container;}function prettyPrintJSON(json){try{return JSON.stringify(typeof json==='string'?JSON.parse(json):json,null,2);}catch{return json;}}function createCopyButton(text){const btn=document.createElement('button');btn.textContent='ðŸ“‹';btn.style='margin-left:8px;cursor:pointer;background:#0a0;color:#000;border:none;padding:2px 6px;border-radius:3px;font-weight:bold;transition:all 0.3s;';btn.onmouseover=()=>{btn.style.transform='scale(1.2)';btn.style.background='#0ff';};btn.onmouseout=()=>{btn.style.transform='scale(1)';btn.style.background='#0a0';};btn.onclick=()=>{navigator.clipboard.writeText(text);btn.textContent='âœ“';setTimeout(()=>{btn.textContent='ðŸ“‹';},1000);};return btn;}function extractToken(headers){for(const k of['authorization','x-api-key','x-api-token','token']){if(headers[k])return headers[k];}return null;}function formatHeaders(headers){let str='';for(const k in headers){str+=%60${k}: ${headers[k]}\n%60;}return str.trim();}function logAPI(data){apiLog.push(data);const entry=document.createElement('div');entry.style='margin:8px 0;padding:5px;border:1px solid #0f0;border-radius:6px;background:#1a1a1a;transition:all 0.3s;';entry.onmouseover=()=>{entry.style.boxShadow='0 0 10px #0f0';};entry.onmouseout=()=>{entry.style.boxShadow='none';};const token=data.token||'Nenhum';const headersStr=formatHeaders(data.headers||{});const bodyStr=prettyPrintJSON(data.body)||'Nenhum';const headerDiv=document.createElement('div');headerDiv.innerHTML=%60<strong style="text-shadow:0 0 5px #0f0;">[${data.type.toUpperCase()}]</strong> <span style="color:#0ff;font-weight:bold;">${data.method}</span> <a href="${data.url}" target="_blank" style="color:#0f0;word-break:break-all;text-decoration:none;">${data.url}</a>%60;const tokenDiv=document.createElement('div');tokenDiv.innerHTML=%60ðŸ”‘ <strong>Token:</strong> <span style="color:#ff0;">${token}</span>%60;const headersSection=createToggleSection('Headers',headersStr);const bodySection=createToggleSection('Body',bodyStr);const copyUrl=createCopyButton(data.url);const copyHeaders=createCopyButton(headersStr);const copyBody=createCopyButton(bodyStr);tokenDiv.appendChild(copyUrl);headersSection.querySelector('summary').appendChild(copyHeaders);bodySection.querySelector('summary').appendChild(copyBody);entry.appendChild(headerDiv);entry.appendChild(tokenDiv);entry.appendChild(headersSection);entry.appendChild(bodySection);panel.appendChild(entry);panel.scrollTop=panel.scrollHeight;}window.fetch=async function(...args){const url=args[0];const opts=args[1]||{};const method=opts.method||'GET';const headers={};const rawHeaders=opts.headers||{};for(const[k,v]of Object.entries(rawHeaders))headers[k.toLowerCase()]=v;const token=extractToken(headers);let body=null;if(opts.body){try{body=JSON.parse(opts.body);}catch{body=opts.body;}}logAPI({type:'fetch',method,url,body,headers,token});return originalFetch.apply(this,args);};XMLHttpRequest.prototype.open=function(method,url){this._method=method;this._url=url;return originalXHROpen.apply(this,arguments);};XMLHttpRequest.prototype.send=function(body){const headers={};const req=this;const originalSetRequestHeader=req.setRequestHeader;req.setRequestHeader=function(k,v){headers[k.toLowerCase()]=v;originalSetRequestHeader.call(req,k,v);};req.addEventListener('load',function(){const token=extractToken(headers);let bodyParsed=null;try{bodyParsed=JSON.parse(body);}catch{bodyParsed=body;}logAPI({type:'xhr',method:req._method,url:req._url,body:bodyParsed,headers,token});});return originalXHRSend.apply(this,arguments);};const alertBox=document.createElement('div');alertBox.style='position:fixed;top:20px;right:20px;padding:15px;background:#121212;color:#0f0;border:2px solid #0f0;border-radius:8px;font-family:monospace;box-shadow:0 0 15px #0f0;z-index:100000;animation:glow 1s ease infinite alternate,slideIn 0.5s ease;';alertBox.innerHTML='<strong>âœ… APIs MONITORADAS!</strong> Painel no canto inferior direito.';document.body.appendChild(alertBox);setTimeout(()=>{alertBox.style.animation='fadeOut 0.5s ease';setTimeout(()=>{alertBox.remove();},500);},3000);const alertStyle=document.createElement('style');alertStyle.textContent='@keyframes slideIn{from{transform:translateX(100%);opacity:0;}to{transform:translateX(0);opacity:1;}}@keyframes fadeOut{from{opacity:1;}to{opacity:0;}}';document.head.appendChild(alertStyle);})();
